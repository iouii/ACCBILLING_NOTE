@using BOI_QUO.Models
@{
    ViewBag.Title = "Profile";
}

<div class="container">
    <div class="row d-flex justify-content-center">
        <div class="col-lg-12 col-md-12 col-12" style="margin-top:10px;">
            <div class="card">

                <div class="card-body" style="background-color:#1E488C; color:#fff">
                    <h5>Profile </h5>

                </div>
            </div>
        </div>
            <div class="col-lg-12 col-md-12 col-12" style="margin-top:10px;">
             

                <table class="table table-sm table-bordered text-center ">
                    <thead style="background-color:#1E488C;color:#fffafa">
                        <tr>
                      
                            <td colspan="5" width="150" align="right">
                                <input type="text" name="name" id="profileCode" value="" class="form-control form-control-sm" style="width:220px" @*onkeyup="queryProfile()"*@/>
                            </td>
                        
                        </tr>
                        <tr>
                            <td>#</td>
                            <td>Code</td>
                            <td>FName</td>
                            <td>LName</td>
                            <td>Permission</td>
                        </tr>

                    </thead>
                    <tbody style="font-size:11px;" id="Tacl">
                        @{int i = 1;}
                        @foreach (UsersProfile data in (UsersProfile[])ViewBag.ProfileList)
                        {
                            <tr>
                                <td>@i</td>
                                <td>@data.userCode</td>
                                <td>@data.userFname</td>
                                <td>@data.userLname</td>
                                <td><a href="@Url.Action("UserPermissionInsert", "System", new { code = data.userCode})">Permission</a></td>
                                @*<td><p onclick="UserPermission(@data.userCode)" class="btn btn-sm">Permission</p></td>*@
                            </tr>
                            i++;
                        }

                    </tbody>

                </table>

            </div>
        </div>
    </div>



<script>

    function UserPermission(usercode) {

        alert(usercode);
    }

</script>

<script>

    function queryProfile() {

        var profileCode = $("#profileCode").val();

        var fileData = new FormData();

        fileData.append('profileCode', profileCode);


        $.ajax({
            url: '/System/Profile',
            type: "POST",
            contentType: false,
            processData: false,
            data: fileData,
            success: function (result) {
                $("#Tacl tr").remove();
                var item = '', rows, rowss;
                $.each(result, function (i, item) {

                    rows = "<tr style='font-size:11px;'>" +
                           "<td  align='center'>" + (i + 1) + "</td>" +
                           "<td>" + item.userCode + "</td>" +
                           "<td  align='center'>" + item.userFname + "</td>" +
                           "<td  align='center'>" + item.userLname + "</td>"+
                           "<td><a href='' onclick='goto(" + item.userCode + ")'>Permission</a></td>"
                           ;

                    rows += "</tr>";
                    $("#Tacl").append(rows);
                });

            },
            error: function (err) {

            }
        });
    }


</script>


<script>
    $(document).ready(function () {
        $("#profileCode").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#Tacl tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });
</script>






